# Stella 项目开发计划

## 第一阶段：实现核心节点模块

### To-Do 列表

1. [x] 创建基本的节点结构 (Node)
   - [x] 定义节点结构体，包含身份、状态等基本属性
   - [x] 实现节点ID生成
   - [x] 实现节点初始化功能

2. [x] 创建配置管理模块
   - [x] 定义配置结构体
   - [x] 实现配置加载功能
   - [x] 添加默认配置

3. [x] 创建日志管理模块
   - [x] 实现基础日志功能
   - [x] 支持不同日志级别
   - [x] 添加日志格式化

4. [x] 实现节点生命周期管理
   - [x] 实现节点启动功能
   - [x] 实现节点关闭功能
   - [x] 添加资源清理逻辑

5. [x] 编写节点模块测试
   - [x] 为节点创建编写单元测试
   - [x] 为配置管理编写单元测试
   - [x] 为日志管理编写单元测试

6. [x] 集成测试
   - [x] 测试节点初始化和生命周期
   - [x] 验证配置加载正确性
   - [x] 验证日志功能正常工作

### 第二阶段：实现传输层

#### To-Do 列表

1. [x] 实现传输协议接口
   - [x] 定义传输层抽象接口
   - [x] 实现基本的数据包收发功能
   - [x] 添加连接状态管理

2. [x] 实现UDP传输后端
   - [x] 实现UDP套接字管理
   - [x] 添加UDP数据包发送和接收
   - [x] 实现超时和重传机制

3. [x] 实现加密通信
   - [x] 集成现有crypto包进行数据加密
   - [x] 实现加密会话管理
   - [x] 添加密钥协商功能

4. [x] 实现连接管理
   - [ ] 实现节点发现机制
   - [x] 添加连接建立和断开逻辑
   - [x] 实现连接状态监控

5. [x] 编写传输层测试
   - [x] 为UDP传输后端编写单元测试
   - [x] 为加密功能编写单元测试
   - [x] 实现传输层集成测试

### 第三阶段：实现交换机功能

#### To-Do 列表

1. [ ] 实现交换机核心逻辑
   - [ ] 定义交换机结构和状态
   - [ ] 实现数据包转发功能
   - [ ] 添加端口管理功能

2. [ ] 实现MAC地址表管理
   - [ ] 实现MAC地址学习机制
   - [ ] 添加地址老化功能
   - [ ] 实现地址表查找优化

3. [ ] 实现VLAN支持
   - [ ] 定义VLAN配置结构
   - [ ] 实现基于VLAN的数据包过滤
   - [ ] 添加VLAN间隔离功能

4. [ ] 实现多播支持
   - [ ] 实现IGMP监听功能
   - [ ] 添加多播数据包转发逻辑
   - [ ] 实现多播组管理

5. [ ] 编写交换机测试
   - [ ] 为MAC地址表编写单元测试
   - [ ] 为数据包转发功能编写单元测试
   - [ ] 实现交换机集成测试

### 第四阶段：实现拓扑管理

#### To-Do 列表

1. [ ] 实现网络拓扑结构
   - [ ] 定义节点和连接模型
   - [ ] 实现拓扑存储结构
   - [ ] 添加拓扑更新机制

2. [ ] 实现路径计算
   - [ ] 实现最短路径算法
   - [ ] 添加路径选择逻辑
   - [ ] 实现负载均衡功能

3. [ ] 实现拓扑发现
   - [ ] 实现节点探测机制
   - [ ] 添加连接状态检测
   - [ ] 实现拓扑变更通知

4. [ ] 实现拓扑可视化（可选）
   - [ ] 定义拓扑导出格式
   - [ ] 实现简单的拓扑可视化功能

5. [ ] 编写拓扑管理测试
   - [ ] 为路径计算编写单元测试
   - [ ] 为拓扑发现编写单元测试
   - [ ] 实现拓扑管理集成测试

### 第五阶段：实现网络管理

#### To-Do 列表

1. [ ] 实现网络配置管理
   - [ ] 定义网络配置结构
   - [ ] 实现配置加载和保存
   - [ ] 添加配置验证功能

2. [ ] 实现节点管理
   - [ ] 实现节点加入和退出机制
   - [ ] 添加节点权限管理
   - [ ] 实现节点状态监控

3. [ ] 实现安全策略管理
   - [ ] 定义安全规则结构
   - [ ] 实现访问控制功能
   - [ ] 添加流量过滤机制

4. [ ] 实现统计和监控
   - [ ] 实现流量统计功能
   - [ ] 添加性能监控指标
   - [ ] 实现状态报告功能

5. [ ] 编写网络管理测试
   - [ ] 为配置管理编写单元测试
   - [ ] 为安全策略编写单元测试
   - [ ] 实现网络管理集成测试

### 第六阶段：开发应用程序入口

#### To-Do 列表

1. [ ] 实现守护进程(stellad)
   - [ ] 实现服务器主循环
   - [ ] 添加信号处理
   - [ ] 实现后台运行模式

2. [ ] 实现命令行工具(stella-cli)
   - [ ] 实现命令行解析
   - [ ] 添加节点管理命令
   - [ ] 实现网络配置命令

3. [ ] 实现API接口
   - [ ] 定义REST API接口
   - [ ] 实现API安全认证
   - [ ] 添加API文档

4. [ ] 实现集成启动流程
   - [ ] 实现组件初始化顺序
   - [ ] 添加依赖检查
   - [ ] 实现优雅启动和关闭

5. [ ] 编写应用程序测试
   - [ ] 为命令行工具编写集成测试
   - [ ] 为API接口编写单元测试
   - [ ] 实现完整系统测试